{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useState,useEffect}from\"react\";import\"./AtividadesFormModal.css\";import Modal from\"components/Modal/Modal\";import{api}from\"utils/api\";import{ActionMode}from\"constants/index\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";function AtividadesFormModal(_ref){var _atividadeToUpdate$ti,_atividadeToUpdate$de,_atividadeToUpdate$da,_atividadeToUpdate$ho;var closeModal=_ref.closeModal,onCreateatividade=_ref.onCreateatividade,mode=_ref.mode,atividadeToUpdate=_ref.atividadeToUpdate,onUpdateatividade=_ref.onUpdateatividade;var form={titulo:(_atividadeToUpdate$ti=atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.titulo)!==null&&_atividadeToUpdate$ti!==void 0?_atividadeToUpdate$ti:\"\",descricao:(_atividadeToUpdate$de=atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.descricao)!==null&&_atividadeToUpdate$de!==void 0?_atividadeToUpdate$de:\"\",data:(_atividadeToUpdate$da=atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.data)!==null&&_atividadeToUpdate$da!==void 0?_atividadeToUpdate$da:\"\",hora:(_atividadeToUpdate$ho=atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.hora)!==null&&_atividadeToUpdate$ho!==void 0?_atividadeToUpdate$ho:\"\"};var _useState=useState(form),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var handleChange=function handleChange(e,name){setState(_objectSpread(_objectSpread({},state),{},_defineProperty({},name,e.target.value)));};var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),canDisable=_useState4[0],setCanDisable=_useState4[1];var canDisableSendButton=function canDisableSendButton(){var response=!Boolean(state.titulo.length&&String(state.data.length)&&String(state.hora.length));setCanDisable(response);};useEffect(function(){canDisableSendButton();});var handleSend=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _serviceCall,_actionResponse;var titulo,descricao,data,hora,atividade,serviceCall,response,actionResponse,reset;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:titulo=state.titulo,descricao=state.descricao,data=state.data,hora=state.hora;atividade=_objectSpread(_objectSpread({},atividadeToUpdate&&{_id:atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.id}),{},{titulo:titulo,descricao:descricao,data:data,hora:hora});serviceCall=(_serviceCall={},_defineProperty(_serviceCall,ActionMode.NORMAL,function(){return api.createAtividade(atividade);}),_defineProperty(_serviceCall,ActionMode.ATUALIZAR,function(){return api.updateAtividade(atividadeToUpdate===null||atividadeToUpdate===void 0?void 0:atividadeToUpdate.id,atividade);}),_serviceCall);_context.next=5;return serviceCall[mode]();case 5:response=_context.sent;actionResponse=(_actionResponse={},_defineProperty(_actionResponse,ActionMode.NORMAL,function(){return onCreateatividade(response);}),_defineProperty(_actionResponse,ActionMode.ATUALIZAR,function(){return onUpdateatividade(response);}),_actionResponse);actionResponse[mode]();reset={preco:'',sabor:'',recheio:'',descricao:'',foto:''};setState(reset);closeModal();case 11:case\"end\":return _context.stop();}},_callee);}));return function handleSend(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(Modal,{closeModal:closeModal,children:/*#__PURE__*/_jsx(\"div\",{className:\"AdicionaAtividadeModal\",children:/*#__PURE__*/_jsxs(\"form\",{autoComplete:\"off\",children:[/*#__PURE__*/_jsxs(\"h2\",{children:[\" \",ActionMode.ATUALIZAR===mode?'Atualizar':'Criar',\" Atividade \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"AdicionaAtividadeModal__text\",htmlFor:\"titulo\",children:\" T\\xEDtulo: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"titulo\",placeholder:\"Ir no supermercado\",type:\"text\",value:state.titulo,onChange:function onChange(e){return handleChange(e,\"titulo\");},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"AdicionaAtividadeModal__text\",htmlFor:\"descricao\",children:\" Descric\\xE3o: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"descricao\",placeholder:\"Ir ao supermecado da esquina comprar feij\\xE3o\",type:\"text\",value:state.descricao,onChange:function onChange(e){return handleChange(e,\"descricao\");}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"AdicionaAtividadeModal__text\",htmlFor:\"data\",children:\" Data: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"data\",placeholder:\"18/07/2023\",type:\"text\",value:state.data,onChange:function onChange(e){return handleChange(e,\"data\");},required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"AdicionaAtividadeModal__text\",htmlFor:\"hora\",children:\" Hora: \"}),/*#__PURE__*/_jsx(\"input\",{id:\"hora\",placeholder:\"18:50\",type:\"text\",value:state.hora,onChange:function onChange(e){return handleChange(e,\"hora\");},required:true})]}),/*#__PURE__*/_jsx(\"button\",{className:\"AdicionaAtividadeModal__enviar\",type:\"submit\",disabled:canDisable,onClick:handleSend,children:ActionMode.NORMAL===mode?'Enviar':'Atualizar'})]})})});}export default AtividadesFormModal;","map":{"version":3,"names":["useState","useEffect","Modal","api","ActionMode","AtividadesFormModal","closeModal","onCreateatividade","mode","atividadeToUpdate","onUpdateatividade","form","titulo","descricao","data","hora","state","setState","handleChange","e","name","target","value","canDisable","setCanDisable","canDisableSendButton","response","Boolean","length","String","handleSend","atividade","_id","id","serviceCall","NORMAL","createAtividade","ATUALIZAR","updateAtividade","actionResponse","reset","preco","sabor","recheio","foto"],"sources":["C:/Users/npcms/OneDrive/Área de Trabalho/TO DO LIST - REACT/to-do-list/src/components/AtividadesFormModal/AtividadesFormModal.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport \"./AtividadesFormModal.css\"\r\nimport Modal from \"components/Modal/Modal\";\r\nimport { api } from \"utils/api\";\r\n\r\n\r\nimport { ActionMode } from \"constants/index\";\r\n\r\nfunction AtividadesFormModal({ closeModal, onCreateatividade, mode, atividadeToUpdate, onUpdateatividade }) {\r\n\r\n    const form = {\r\n        titulo: atividadeToUpdate?.titulo ?? \"\",\r\n        descricao: atividadeToUpdate?.descricao ?? \"\",\r\n        data: atividadeToUpdate?.data ?? \"\",\r\n        hora: atividadeToUpdate?.hora ?? \"\"\r\n    };\r\n\r\n    const [state, setState] = useState(form);\r\n\r\n\r\n    const handleChange = (e, name) => {\r\n        setState({ ...state, [name]: e.target.value, });\r\n    };\r\n\r\n    const [canDisable, setCanDisable] = useState(true)\r\n\r\n    const canDisableSendButton = () => {\r\n\r\n        const response = !Boolean(\r\n            state.titulo.length &&\r\n            String(state.data.length) &&\r\n            String(state.hora.length)\r\n        )\r\n\r\n        setCanDisable(response)\r\n    }\r\n\r\n    useEffect(\r\n        () => {\r\n\r\n            canDisableSendButton();\r\n        }\r\n    )\r\n\r\n    const handleSend = async () => {\r\n\r\n        const { titulo, descricao, data, hora } = state;\r\n\r\n        const atividade = {\r\n            ...(atividadeToUpdate && { _id: atividadeToUpdate?.id }),\r\n            titulo,\r\n            descricao,\r\n            data,\r\n            hora\r\n        }\r\n\r\n        const serviceCall = {\r\n            [ActionMode.NORMAL]: () => api.createAtividade(atividade),\r\n            [ActionMode.ATUALIZAR]: () => api.updateAtividade(atividadeToUpdate?.id, atividade),\r\n        }\r\n\r\n        const response = await serviceCall[mode]();\r\n\r\n        const actionResponse = {\r\n            [ActionMode.NORMAL]: () => onCreateatividade(response),\r\n            [ActionMode.ATUALIZAR]: () => onUpdateatividade(response),\r\n        }\r\n\r\n        actionResponse[mode]();\r\n\r\n        const reset = {\r\n            preco: '',\r\n            sabor: '',\r\n            recheio: '',\r\n            descricao: '',\r\n            foto: '',\r\n        }\r\n\r\n        setState(reset);\r\n\r\n        closeModal();\r\n\r\n    }\r\n\r\n    return (\r\n        <Modal closeModal={closeModal}>\r\n            <div className=\"AdicionaAtividadeModal\">\r\n                <form autoComplete=\"off\">\r\n                    <h2> {ActionMode.ATUALIZAR === mode ? 'Atualizar' : 'Criar'} Atividade </h2>\r\n                    <div>\r\n                        <label className=\"AdicionaAtividadeModal__text\" htmlFor=\"titulo\"> Título: </label>\r\n                        <input\r\n                            id=\"titulo\"\r\n                            placeholder=\"Ir no supermercado\"\r\n                            type=\"text\"\r\n                            value={state.titulo}\r\n                            onChange={(e) => handleChange(e, \"titulo\")}\r\n                            required />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"AdicionaAtividadeModal__text\" htmlFor=\"descricao\"> Descricão: </label>\r\n                        <input\r\n                            id=\"descricao\"\r\n                            placeholder=\"Ir ao supermecado da esquina comprar feijão\"\r\n                            type=\"text\"\r\n                            value={state.descricao}\r\n                            onChange={(e) => handleChange(e, \"descricao\")} />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"AdicionaAtividadeModal__text\" htmlFor=\"data\"> Data: </label>\r\n                        <input\r\n                            id=\"data\"\r\n                            placeholder=\"18/07/2023\"\r\n                            type=\"text\"\r\n                            value={state.data}\r\n                            onChange={(e) => handleChange(e, \"data\")}\r\n                            required />\r\n                    </div>\r\n                    <div>\r\n                        <label className=\"AdicionaAtividadeModal__text\" htmlFor=\"hora\"> Hora: </label>\r\n                        <input\r\n                            id=\"hora\"\r\n                            placeholder=\"18:50\"\r\n                            type=\"text\"\r\n                            value={state.hora}\r\n                            onChange={(e) => handleChange(e, \"hora\")}\r\n                            required />\r\n                    </div>\r\n\r\n                    <button className=\"AdicionaAtividadeModal__enviar\"\r\n                        type=\"submit\"\r\n                        disabled={canDisable}\r\n                        onClick={handleSend}>\r\n                        {ActionMode.NORMAL === mode ? 'Enviar' : 'Atualizar'}\r\n                    </button>\r\n                </form>\r\n            </div>\r\n        </Modal>\r\n    );\r\n}\r\n\r\nexport default AtividadesFormModal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}