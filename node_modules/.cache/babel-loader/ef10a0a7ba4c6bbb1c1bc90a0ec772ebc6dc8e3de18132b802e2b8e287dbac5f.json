{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _defineProperty from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _asyncToGenerator from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _toConsumableArray from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/npcms/OneDrive/\\xC1rea de Trabalho/TO DO LIST - REACT/to-do-list/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useCallback}from\"react\";import\"./ListaAtividades.css\";import{api}from\"utils/api\";import ListaAtividadeItem from\"components/ListaAtividadesItem/ListaAtividadesItem\";import AtividadesByIdModal from\"components/AtividadesByIdModal/AtividadesByIdModal\";import{ActionMode}from\"constants/index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function AtividadeLista(_ref){var atividadeCriada=_ref.atividadeCriada,mode=_ref.mode,updateAtividade=_ref.updateAtividade,deleteAtividade=_ref.deleteAtividade,atividadeRemovida=_ref.atividadeRemovida,atividadeEditada=_ref.atividadeEditada;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),atividades=_useState2[0],setAtividades=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),atividadeModal=_useState4[0],setAtividadeModal=_useState4[1];var adicionaAtividadeNaLista=useCallback(function(atividade){var lista=[].concat(_toConsumableArray(atividades),[atividade]);setAtividades(lista);},[atividades]);var getAtividadeById=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(atividadeId){var _mapper;var response,mapper;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return api.getAtividadeById(atividadeId);case 2:response=_context.sent;mapper=(_mapper={},_defineProperty(_mapper,ActionMode.NORMAL,function(){return setAtividadeModal(response);}),_defineProperty(_mapper,ActionMode.ATUALIZAR,function(){return updateAtividade(response);}),_defineProperty(_mapper,ActionMode.DELETAR,function(){return deleteAtividade(response);}),_mapper);mapper[mode]();case 5:case\"end\":return _context.stop();}},_callee);}));return function getAtividadeById(_x){return _ref2.apply(this,arguments);};}();var getAtividades=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var response;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.next=2;return api.getAllAtividades();case 2:response=_context2.sent;setAtividades(response);case 4:case\"end\":return _context2.stop();}},_callee2);}));return function getAtividades(){return _ref3.apply(this,arguments);};}();useEffect(function(){getAtividades();},[atividadeRemovida,atividadeEditada]);useEffect(function(){if(atividadeCriada&&!atividades.map(function(_ref4){var id=_ref4.id;return id;}).includes(atividadeCriada.id)){adicionaAtividadeNaLista(atividadeCriada);}},[adicionaAtividadeNaLista,atividadeCriada,atividades]);return/*#__PURE__*/_jsxs(\"div\",{className:\"AtividadeLista\",children:[atividades.map(function(atividade,index){return/*#__PURE__*/_jsx(ListaAtividadeItem,{className:\"listaAtividadeItem\",atividade:atividade,clickItem:function clickItem(atividadeId){return getAtividadeById(atividadeId);},mode:mode},\"AtividadeListaItem-\".concat(index));}),atividadeModal&&/*#__PURE__*/_jsx(AtividadesByIdModal,{closeModal:function closeModal(){return setAtividadeModal(false);},atividades:atividadeModal})]});}export default AtividadeLista;","map":{"version":3,"names":["React","useEffect","useState","useCallback","api","ListaAtividadeItem","AtividadesByIdModal","ActionMode","AtividadeLista","atividadeCriada","mode","updateAtividade","deleteAtividade","atividadeRemovida","atividadeEditada","atividades","setAtividades","atividadeModal","setAtividadeModal","adicionaAtividadeNaLista","atividade","lista","getAtividadeById","atividadeId","response","mapper","NORMAL","ATUALIZAR","DELETAR","getAtividades","getAllAtividades","map","id","includes","index"],"sources":["C:/Users/npcms/OneDrive/Ãrea de Trabalho/TO DO LIST - REACT/to-do-list/src/components/ListaAtividades/ListaAtividades.jsx"],"sourcesContent":["import React, { useEffect, useState, useCallback } from \"react\";\r\nimport \"./ListaAtividades.css\";\r\nimport { api } from \"utils/api\";\r\n\r\n\r\nimport ListaAtividadeItem from \"components/ListaAtividadesItem/ListaAtividadesItem\";\r\nimport AtividadesByIdModal from \"components/AtividadesByIdModal/AtividadesByIdModal\";\r\n\r\nimport { ActionMode } from \"constants/index\";\r\n\r\nfunction AtividadeLista({ atividadeCriada, mode, updateAtividade, deleteAtividade, atividadeRemovida, atividadeEditada }) {\r\n\r\n    const [atividades, setAtividades] = useState([]);\r\n\r\n    const [atividadeModal, setAtividadeModal] = useState(false);\r\n\r\n\r\n    const adicionaAtividadeNaLista = useCallback(\r\n        \r\n        (atividade) => {\r\n        const lista = [...atividades, atividade];\r\n        setAtividades(lista);},\r\n        [atividades]);\r\n\r\n\r\n    const getAtividadeById = async (atividadeId) => {\r\n\r\n        const response = await api.getAtividadeById(atividadeId);\r\n\r\n        const mapper = {\r\n            [ActionMode.NORMAL]: () => setAtividadeModal(response),\r\n            [ActionMode.ATUALIZAR]: () => updateAtividade(response),\r\n            [ActionMode.DELETAR]: () => deleteAtividade(response),\r\n        };\r\n\r\n        mapper[mode]();\r\n    }\r\n\r\n\r\n\r\n\r\n    const getAtividades = async () => {\r\n        const response = await api.getAllAtividades()\r\n        setAtividades(response)\r\n    }\r\n\r\n\r\n    useEffect(() => {\r\n        getAtividades();\r\n    }, [atividadeRemovida, atividadeEditada])\r\n\r\n    useEffect(() => {\r\n        if (\r\n          atividadeCriada &&\r\n          !atividades.map(({ id }) => id).includes(atividadeCriada.id)\r\n        ) {\r\n          adicionaAtividadeNaLista(atividadeCriada);\r\n        }\r\n      }, [adicionaAtividadeNaLista, atividadeCriada, atividades]) \r\n    \r\n\r\n    return (\r\n\r\n        <div className=\"AtividadeLista\">\r\n            {atividades.map((atividade, index) => (\r\n\r\n                <ListaAtividadeItem\r\n                    className=\"listaAtividadeItem\"\r\n                    key={`AtividadeListaItem-${index}`}\r\n                    atividade={atividade}\r\n                    clickItem={(atividadeId) => getAtividadeById(atividadeId)}\r\n                    mode={mode}\r\n\r\n                />\r\n            ))}\r\n\r\n            {\r\n                atividadeModal && (<AtividadesByIdModal\r\n                    closeModal={() => setAtividadeModal(false)}\r\n                    atividades={atividadeModal}\r\n                />)\r\n            }\r\n\r\n        </div>\r\n\r\n    );\r\n}\r\n\r\nexport default AtividadeLista;"],"mappings":"qzBAAA,MAAOA,MAAK,EAAIC,SAAS,CAAEC,QAAQ,CAAEC,WAAW,KAAQ,OAAO,CAC/D,MAAO,uBAAuB,CAC9B,OAASC,GAAG,KAAQ,WAAW,CAG/B,MAAOC,mBAAkB,KAAM,oDAAoD,CACnF,MAAOC,oBAAmB,KAAM,oDAAoD,CAEpF,OAASC,UAAU,KAAQ,iBAAiB,CAAC,wFAE7C,QAASC,eAAc,MAAmG,IAAhGC,gBAAe,MAAfA,eAAe,CAAEC,IAAI,MAAJA,IAAI,CAAEC,eAAe,MAAfA,eAAe,CAAEC,eAAe,MAAfA,eAAe,CAAEC,iBAAiB,MAAjBA,iBAAiB,CAAEC,gBAAgB,MAAhBA,gBAAgB,CAElH,cAAoCZ,QAAQ,CAAC,EAAE,CAAC,wCAAzCa,UAAU,eAAEC,aAAa,eAEhC,eAA4Cd,QAAQ,CAAC,KAAK,CAAC,yCAApDe,cAAc,eAAEC,iBAAiB,eAGxC,GAAMC,yBAAwB,CAAGhB,WAAW,CAExC,SAACiB,SAAS,CAAK,CACf,GAAMC,MAAK,8BAAON,UAAU,GAAEK,SAAS,EAAC,CACxCJ,aAAa,CAACK,KAAK,CAAC,CAAC,CAAC,CACtB,CAACN,UAAU,CAAC,CAAC,CAGjB,GAAMO,iBAAgB,6FAAG,iBAAOC,WAAW,yKAEhBnB,IAAG,CAACkB,gBAAgB,CAACC,WAAW,CAAC,QAAlDC,QAAQ,eAERC,MAAM,qCACPlB,UAAU,CAACmB,MAAM,CAAG,iBAAMR,kBAAiB,CAACM,QAAQ,CAAC,4BACrDjB,UAAU,CAACoB,SAAS,CAAG,iBAAMhB,gBAAe,CAACa,QAAQ,CAAC,4BACtDjB,UAAU,CAACqB,OAAO,CAAG,iBAAMhB,gBAAe,CAACY,QAAQ,CAAC,aAGzDC,MAAM,CAACf,IAAI,CAAC,EAAE,CAAC,qDAClB,kBAXKY,iBAAgB,6CAWrB,CAKD,GAAMO,cAAa,6FAAG,6KACKzB,IAAG,CAAC0B,gBAAgB,EAAE,QAAvCN,QAAQ,gBACdR,aAAa,CAACQ,QAAQ,CAAC,wDAC1B,kBAHKK,cAAa,2CAGlB,CAGD5B,SAAS,CAAC,UAAM,CACZ4B,aAAa,EAAE,CACnB,CAAC,CAAE,CAAChB,iBAAiB,CAAEC,gBAAgB,CAAC,CAAC,CAEzCb,SAAS,CAAC,UAAM,CACZ,GACEQ,eAAe,EACf,CAACM,UAAU,CAACgB,GAAG,CAAC,mBAAGC,GAAE,OAAFA,EAAE,OAAOA,GAAE,GAAC,CAACC,QAAQ,CAACxB,eAAe,CAACuB,EAAE,CAAC,CAC5D,CACAb,wBAAwB,CAACV,eAAe,CAAC,CAC3C,CACF,CAAC,CAAE,CAACU,wBAAwB,CAAEV,eAAe,CAAEM,UAAU,CAAC,CAAC,CAG7D,mBAEI,aAAK,SAAS,CAAC,gBAAgB,WAC1BA,UAAU,CAACgB,GAAG,CAAC,SAACX,SAAS,CAAEc,KAAK,qBAE7B,KAAC,kBAAkB,EACf,SAAS,CAAC,oBAAoB,CAE9B,SAAS,CAAEd,SAAU,CACrB,SAAS,CAAE,mBAACG,WAAW,QAAKD,iBAAgB,CAACC,WAAW,CAAC,EAAC,CAC1D,IAAI,CAAEb,IAAK,+BAHgBwB,KAAK,EAKlC,EACL,CAAC,CAGEjB,cAAc,eAAK,KAAC,mBAAmB,EACnC,UAAU,CAAE,4BAAMC,kBAAiB,CAAC,KAAK,CAAC,EAAC,CAC3C,UAAU,CAAED,cAAe,EAC5B,GAGL,CAGd,CAEA,cAAeT,eAAc"},"metadata":{},"sourceType":"module","externalDependencies":[]}